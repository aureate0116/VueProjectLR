import{_ as b,L as y,S as p,r as g,o as s,c as o,d as n,b as t,F as r,A as l,f as S,w as d,g as f,t as u,B as v}from"./index-4f5225c2.js";const{VITE_API_PATH:_}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR",MODE:"production",DEV:!1,PROD:!0},B={data(){return{isLoading:!1,routerUserId:this.$route.params.userid,userInfo:null,userId:localStorage.getItem("userId"),accessToken:localStorage.getItem("accessToken"),userBookmarksData:[]}},components:{LoadingComponent:y},computed:{},methods:{getUserData(){this.$http.get(`${_}/users/${this.userId}`).then(a=>{this.userInfo=a.data[0],this.isLogin=!0,this.routerUserId!=this.userId&&(this.$router.push("/"),console.log("登入資訊與用戶存取頁不符"))}).catch(a=>{console.log(a)})},getUserBookmarks(){this.$http.get(`${_}/bookmarks?_expand=resource&&userId=${this.userId}`).then(a=>{this.userBookmarksData=a.data,console.log("userBookmarksData",this.userBookmarksData)}).catch(a=>{console.log(a)})},removeResourceItem(a){console.log(a),p.fire({title:"您確定要取消收藏嗎?",icon:"warning",iconColor:"#F8B436",showCancelButton:!0,confirmButtonColor:"#4AA9B6",cancelButtonColor:"#F8B436",confirmButtonText:"是",cancelButtonText:"否"}).then(m=>{m.isConfirmed&&typeof Storage<"u"&&this.$http.delete(`${_}/bookmarks/${a}`,{Authorization:`Bearer ${this.accessToken}`}).then(()=>{p.fire({title:"已成功取消收藏",confirmButtonColor:"#4AA9B6"}),this.getUserBookmarks()}).catch(()=>{})}).catch(()=>{})}},created(){this.getUserData(),this.getUserBookmarks()},mounted(){}},w={class:"container my-8 pb-5"},A={class:"mt-4"},$=S('<div class="row"><div class="col-lg-4 col-md-6 col"><div class="mb-lg-5 mb-md-3 d-flex justify-content-between"><select class="form-select form-select-sm me-1" aria-label=".form-select-sm example"><option selected>所有資源</option><option value="1">建立的資源</option><option value="2">收藏的資源</option></select><select class="form-select form-select-sm me-1" aria-label=".form-select-sm example"><option selected>資源主題</option><option value="1">(我收藏的資源主題)</option><option value="2">(其他我收藏的資源)</option></select></div></div><div class="col-lg-2 col-md-6 col"><div class="d-flex align-items-center"><input class="form-check-input" type="checkbox" value="" id="selectAll"><label class="form-check-label fs-8 mx-1" for="selectAll">全選</label><button class="btn btn-light fs-8 mx-1 text-dark">刪除</button></div></div><div class="col-lg-4"></div><div class="col-lg-2 fs-7"><div class="input-group mb-5"><select class="form-select form-select-sm" id="inputGroupSelect01"><option value="heightRate" selected>最高評價</option><option value="new">最新</option></select></div></div></div><div class="row border-bottom"><div class="col-1 d-none d-xl-block"></div><div class="col-2 col-md-1 d-flex justify-content-center">置頂</div><div class="col-1 d-none d-md-block"></div><div class="col-xl-4 col-4 col-md-5 text-center">資源項目</div><div class="col-xl-4 col-6 col-md-5 text-center">操作</div><div class="col-1 d-none d-xl-block"></div></div>',2),C={class:"row"},R={class:"col userResourcesList"},V=t("div",{class:"col-1 d-flex justify-content-center"},[t("span",{class:"material-icons-outlined fs-7 text-yellowBrown"},"push_pin")],-1),D={key:0,class:"col-1 d-none d-md-block"},L=["src","alt"],U={key:1,class:"col-1 d-none d-md-block"},j=["src","alt"],T={class:"col-xl-4 col-4 col-md-5"},N={class:"fs-7"},P={key:0,class:"d-flex flex-wrap align-items-center"},E=t("span",{class:"fs-8 fw-bold text-gray me-lg-2"},"尚無評論",-1),F=[E],H={key:1,class:"d-flex flex-wrap align-items-center"},O={key:0,class:"fs-7 fw-bold text-secondary"},z={key:0},G={key:1},M={class:"d-flex mx-1 lh-1 text-secondary"},q={key:0},I={key:1},J=t("span",{class:"material-icons material-icons-sharp fs-8"},"star_half",-1),K={key:2},Q=t("span",{class:"material-icons material-icons-sharp fs-8"},"star",-1),W={class:"fs-8 text-secondary"},X={class:"col-xl-4 col-6 col-md-5"},Y={class:"d-flex align-items-center justify-content-center flex-wrap"},Z=["href"],ee=["onClick"],te=t("span",{class:"fs-6 material-icons btnRemove"},"bookmark_remove",-1),se=[te];function oe(a,m,ae,ce,h,k){const x=g("loading-component"),i=g("router-link");return s(),o(r,null,[n(x,{"is-loading":h.isLoading},null,8,["is-loading"]),t("div",w,[t("div",A,[$,t("div",C,[t("div",R,[(s(!0),o(r,null,l(h.userBookmarksData,e=>(s(),o("div",{key:e.resourceId,class:"row my-3 d-flex align-items-center itemRow"},[V,e.resource.imgUrl!=""?(s(),o("div",D,[n(i,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[t("img",{src:"/VueProjectLR/images/resources_cover/"+e.resource.imgUrl,alt:e.resource.title},null,8,L)]),_:2},1032,["to"])])):(s(),o("div",U,[n(i,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[t("img",{src:"/VueProjectLR/images/resources_cover/noimgCover.jpg",alt:e.resource.title},null,8,j)]),_:2},1032,["to"])])),t("div",T,[t("h4",N,[n(i,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[f(u(e.resource.title),1)]),_:2},1032,["to"])]),e.resource.commentSum===0||e.resource.commentSum===void 0?(s(),o("div",P,F)):(s(),o("div",H,[e.resource.averageScore!==void 0&&e.resource.commentSum!==0?(s(),o("span",O,[isNaN(parseInt(e.resource.averageScore.toString().charAt(2)))?(s(),o("span",z,u(e.resource.averageScore)+".0",1)):(s(),o("span",G,u(e.resource.averageScore),1))])):v("",!0),t("ul",M,[t("li",null,[(s(!0),o(r,null,l(parseInt(e.resource.averageScore.toString().charAt(0)),c=>(s(),o("span",{key:c+1,class:"material-icons material-icons-sharp fs-8"},"star"))),128))]),parseInt(e.resource.averageScore.toString().charAt(2))<=2||isNaN(parseInt(e.resource.averageScore.toString().charAt(2)))||typeof parseInt(e.resource.averageScore.toString().charAt(2))>"u"?(s(),o("li",q,[(s(!0),o(r,null,l(5-parseInt(e.resource.averageScore.toString().charAt(0)),c=>(s(),o("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(e.resource.averageScore.toString().charAt(2))>=3&&parseInt(e.resource.averageScore.toString().charAt(2))<=7?(s(),o("li",I,[J,(s(!0),o(r,null,l(5-parseInt(e.resource.averageScore.toString().charAt(0))-1,c=>(s(),o("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(e.resource.averageScore.toString().charAt(2))>=8?(s(),o("li",K,[Q,(s(!0),o(r,null,l(5-parseInt(e.resource.averageScore.toString().charAt(0))-1,c=>(s(),o("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_half"))),128))])):v("",!0)]),t("span",W,"("+u(e.resource.commentSum)+")",1)]))]),t("div",X,[t("div",Y,[t("a",{href:e.resource.url,target:"_blank",type:"button",class:"btn btn-tiffany my-2 mx-1"},"開啟資源網站",8,Z),n(i,{class:"btn btn-yellowBrown my-2 mx-1",type:"button",to:`/resource/${e.resource.id}`},{default:d(()=>[f("查看評論")]),_:2},1032,["to"]),t("div",null,[t("a",{role:"button",onClick:c=>k.removeResourceItem(e.id),class:"btn my-2 mx-1 text-yellowBrown"},se,8,ee)])])])]))),128))])])])])],64)}const ne=b(B,[["render",oe]]);export{ne as default};
