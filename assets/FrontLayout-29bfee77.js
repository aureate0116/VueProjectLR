import{_,R as m,a as f,m as v,r as d,o as r,c as i,b as e,d as a,w as b,v as x,e as u,f as h,t as w,g as y,h as k,K as I,i as p}from"./index-bf060d23.js";import{u as C}from"./userStore-3a4b5cac.js";const{VITE_API_PATH:L}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{isLogin:!1,userInfo:null,userId:localStorage.getItem("userId"),accessToken:localStorage.getItem("accessToken"),searchbarContent:"",searchText:""}},components:{RouterView:m,RouterLink:f},computed:{},watch:{userInfo(){this.userInfo===null||this.userInfo===void 0?this.isLogin=!1:this.isLogin=!0}},created(){this.getUserData()},methods:{...v(C,["login"]),goHome(){this.$route.name!=="home"&&this.$router.push({path:"/"})},getUserData(){this.$http.get(`${L}/users?id=${this.userId}`,{Authorization:`Bearer ${this.accessToken}`}).then(c=>{this.userInfo=c.data[0],this.isLogin=!0}).catch(()=>{})},logout(){this.isLogin=!1,this.$router.push("/"),localStorage.setItem("accessToken",""),localStorage.setItem("userId","")},searchResources(){this.searchbarContent&&(this.searchText=this.searchbarContent,this.$router.push({path:`/resource-list/search=${this.searchText}`})),this.searchbarContent=""}},mounted(){}},S={class:"container-fluid p-0 bg-white min-vh-100 d-flex flex-column justify-content-between"},R={class:"container-fluid p-lg-0"},V={class:"container p-lg-0"},j={class:"navbar navbar-expand-lg navbar-light py-4"},P={class:"container-fluid p-0 d-lg-flex align-items-center"},M=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarContent","aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),A={class:"collapse navbar-collapse mt-3 mt-lg-0 d-lg-flex justify-content-end",id:"navbarContent"},B=e("ul",{class:"navbar-nav d-lg-flex align-items-lg-center"},[e("li",{class:"nav-item position-relative"},[e("a",{class:"nav-link dropdown-toggle text-black",href:"#",id:"resourceBrowse",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"探索資源"),e("ul",{class:"dropdown-menu position-absolute start-0","aria-labelledby":"resourceBrowse"},[e("li",null,[e("a",{class:"dropdown-item",href:"/VueProjectLR#/resource-list/JavaScript"},"JavaScript")]),e("li",null,[e("a",{class:"dropdown-item",href:"/VueProjectLR#/resource-list/HTML&CSS"},"HTML/CSS")]),e("li",null,[e("a",{class:"dropdown-item",href:"/VueProjectLR#/resource-list/Python"},"Python")])])])],-1),D={class:"navbar-nav d-lg-flex align-items-lg-center mx-3"},E={class:"nav-item text-black"},H={class:"bg-light input-group input-group-sm rounded-3 my-3"},K=e("a",{class:"btn lh-1",href:"#",role:"button"},[e("span",{class:"material-icons material-icons-outlined"},"search")],-1),U={key:0},$={class:"navbar-nav beforeLogin"},N={class:"nav-item d-flex"},J={key:1,class:"desktopMenu"},O={class:"afterLogin justify-content-end navbar-nav d-lg-flex align-items-lg-center lh-1"},z=e("li",{class:"nav-item"},null,-1),F=e("li",{class:"nav-item dropdown create"},null,-1),q={class:"nav-item dropdown"},G={class:"nav-link dropdown-toggle accountMenuImg",href:"#",id:"accountMenu",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Q={class:"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center"},W={class:"dropdown-menu","aria-labelledby":"accountMenu"},X={class:"accountMenu"},Y={class:"container-fluid p-lg-0"},Z={class:"footer container-fluid py-5 p-lg-5 bg-primary"},ee={class:"container d-flex flex-md-row flex-column justify-content-between align-items-center"},te={class:"navbar-nav d-flex flex-row flex-wrap justify-content-start"},se={class:"nav-item me-md-5 mb-3 mb-md-0"},oe=e("li",{class:"nav-item me-2"},[e("a",{class:"nav-link text-white"})],-1),ne=e("ul",{class:"navbar-nav d-flex flex-row"},[e("li",{class:"nav-item me-2"},[e("a",{class:"nav-link text-white fs-8"},"僅學習作品用無商業用途")])],-1);function ae(c,t,le,re,s,o){const l=d("router-link"),g=d("router-view");return r(),i("div",S,[e("header",R,[e("div",V,[e("nav",j,[e("div",P,[a(l,{class:"navbar-brand mt-lg-2",to:{path:"/"},onClick:o.goHome},null,8,["onClick"]),M,e("div",A,[B,e("ul",D,[e("li",E,[e("div",H,[K,b(e("input",{class:"border-0 bg-light form-control",type:"text",placeholder:"JavaScript","onUpdate:modelValue":t[0]||(t[0]=n=>s.searchbarContent=n),onKeyup:t[1]||(t[1]=u(n=>o.searchResources(),["enter"])),onKeydown:t[2]||(t[2]=u(n=>o.searchResources(),["enter"]))},null,544),[[x,s.searchbarContent]])])])]),s.isLogin===!1?(r(),i("div",U,[e("ul",$,[e("li",N,[a(l,{class:"nav-link btn btn-primary mx-lg-2 px-2 text-white",to:"/login"},{default:h(()=>[p("登入")]),_:1})])])])):(r(),i("div",J,[e("ul",O,[z,F,e("li",q,[e("a",G,[e("span",Q,w(s.userInfo.firstName[0].toUpperCase()),1)]),e("ul",W,[e("li",null,[e("ul",X,[e("li",null,[a(l,{class:"dropdown-item",to:"/user-home/user-resources"},{default:h(()=>[p("我的資源")]),_:1})])])]),e("li",null,[e("a",{role:"button",class:"dropdown-item logOut",onClick:t[3]||(t[3]=y((...n)=>o.logout&&o.logout(...n),["prevent"]))},"登出")])])])])]))])])])])]),e("div",Y,[e("main",null,[(r(),k(I,null,[a(g,{"search-text":s.searchText},null,8,["search-text"])],1024))])]),e("footer",Z,[e("div",ee,[e("ul",te,[e("li",se,[a(l,{class:"footer-brand",to:"/"})]),oe]),ne])])])}const de=_(T,[["render",ae]]);export{de as default};
