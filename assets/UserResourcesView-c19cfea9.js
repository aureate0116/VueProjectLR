import{_ as x,L as b,S as f,r as p,o,c as t,d as a,b as s,F as n,A as i,f as y,w as d,g as v,t as u,B}from"./index-80b8bc0d.js";const{VITE_API_PATH:m}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR",MODE:"production",DEV:!1,PROD:!0},w={data(){return{isLoading:!1,routerUserId:this.$route.params.userid,userInfo:null,userId:localStorage.getItem("userId"),accessToken:localStorage.getItem("accessToken"),userBookmarksData:[]}},components:{LoadingComponent:b},computed:{},methods:{getUserData(){this.$http.get(`${m}/users/${this.userId}`).then(l=>{this.userInfo=l.data[0],this.isLogin=!0,this.routerUserId!=this.userId&&(this.$router.push("/"),console.log("登入資訊與用戶存取頁不符"))}).catch(l=>{console.log(l)})},getUserBookmarks(){this.$http.get(`${m}/bookmarks?_expand=resource&&userId=${this.userId}`).then(l=>{this.userBookmarksData=l.data,console.log("userBookmarksData",this.userBookmarksData)}).catch(l=>{console.log(l)})},removeResourceItem(l){console.log(l),f.fire({title:"您確定要取消收藏嗎?",icon:"warning",iconColor:"#F8B436",showCancelButton:!0,confirmButtonColor:"#4AA9B6",cancelButtonColor:"#F8B436",confirmButtonText:"是",cancelButtonText:"否"}).then(_=>{_.isConfirmed&&typeof Storage<"u"&&this.$http.delete(`${m}/bookmarks/${l}`,{Authorization:`Bearer ${this.accessToken}`}).then(()=>{f.fire({title:"已成功取消收藏",confirmButtonColor:"#4AA9B6"}),this.getUserBookmarks()}).catch(()=>{})}).catch(()=>{})}},created(){this.getUserData(),this.getUserBookmarks()},mounted(){}},S={class:"container my-8 pb-5"},$={class:"mt-4"},A=y('<div class="row"><div class="col-lg-4 col-md-6 col"><div class="mb-lg-5 mb-md-3 d-flex justify-content-between"><select class="form-select form-select-sm me-1" aria-label=".form-select-sm example"><option selected>所有資源</option><option value="1">建立的資源</option><option value="2">收藏的資源</option></select><select class="form-select form-select-sm me-1" aria-label=".form-select-sm example"><option selected>資源主題</option><option value="1">(我收藏的資源主題)</option><option value="2">(其他我收藏的資源)</option></select></div></div><div class="col-lg-2 col-md-6 col"><div class="d-flex align-items-center"><input class="form-check-input" type="checkbox" value="" id="selectAll"><label class="form-check-label fs-8 mx-1" for="selectAll">全選</label><button class="btn btn-light fs-8 mx-1 text-dark">刪除</button></div></div><div class="col-lg-4"></div><div class="col-lg-2 fs-7"><div class="input-group mb-5"><select class="form-select form-select-sm" id="inputGroupSelect01"><option value="heightRate" selected>最高評價</option><option value="new">最新</option></select></div></div></div><div class="row border-bottom"><div class="col-1 d-none d-xl-block"></div><div class="col-2 col-md-1 d-flex justify-content-center">置頂</div><div class="col-1 d-none d-md-block"></div><div class="col-xl-4 col-4 col-md-5 text-center">資源項目</div><div class="col-xl-4 col-6 col-md-5 text-center">操作</div><div class="col-1 d-none d-xl-block"></div></div>',2),C={class:"row"},R={class:"col userResourcesList"},V=s("div",{class:"col-1 d-flex justify-content-center"},[s("span",{class:"material-icons-outlined fs-7 text-yellowBrown"},"push_pin")],-1),D={key:0,class:"col-1 d-none d-md-block"},L=["src","alt"],U={key:1,class:"col-1 d-none d-md-block"},j=["src","alt"],T={class:"col-xl-4 col-4 col-md-5"},P={class:"fs-7"},E={key:0,class:"d-flex flex-wrap align-items-center"},N=s("span",{class:"fs-8 fw-bold text-gray me-lg-2"},"尚無評論",-1),F=[N],H={key:1,class:"d-flex flex-wrap align-items-center"},O={class:"fs-7 fw-bold text-secondary"},z={class:"d-flex align-items-center lh-1 me-lg-2"},G={key:0},M={key:1},q=s("span",{class:"material-icons material-icons-sharp fs-8"},"star_half",-1),J=[q],K={key:2},Q={class:"fs-8 text-secondary"},W={class:"col-xl-4 col-6 col-md-5"},X={class:"d-flex align-items-center justify-content-center flex-wrap"},Y=["href"],Z=["onClick"],I=s("span",{class:"fs-6 material-icons btnRemove"},"bookmark_remove",-1),ee=[I];function se(l,_,oe,te,h,g){const k=p("loading-component"),r=p("router-link");return o(),t(n,null,[a(k,{"is-loading":h.isLoading},null,8,["is-loading"]),s("div",S,[s("div",$,[A,s("div",C,[s("div",R,[(o(!0),t(n,null,i(h.userBookmarksData,e=>(o(),t("div",{key:e.resourceId,class:"row my-3 d-flex align-items-center itemRow"},[V,e.resource.imgUrl!=""?(o(),t("div",D,[a(r,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[s("img",{src:"/VueProjectLR/images/resources_cover/"+e.resource.imgUrl,alt:e.resource.title},null,8,L)]),_:2},1032,["to"])])):(o(),t("div",U,[a(r,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[s("img",{src:"/VueProjectLR/images/resources_cover/noimgCover.jpg",alt:e.resource.title},null,8,j)]),_:2},1032,["to"])])),s("div",T,[s("h4",P,[a(r,{to:`/resource/${e.resource.id}`,target:"_blank"},{default:d(()=>[v(u(e.resource.title),1)]),_:2},1032,["to"])]),e.resource.commentSum===0||e.resource.commentSum===void 0?(o(),t("div",E,F)):(o(),t("div",H,[s("span",O,u(e.resource.averageScore),1),s("ul",z,[s("li",null,[(o(!0),t(n,null,i(e.resource.averageScore,c=>(o(),t("span",{key:c+1,class:"material-icons material-icons-sharp fs-8"},"star"))),128))]),e.resource.averageScore[2]<=2?(o(),t("li",G,[(o(!0),t(n,null,i(5-e.resource.averageScore[0],c=>(o(),t("span",{key:c+2,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):e.resource.averageScore[2]>=3&&e.resource.averageScore[2]<=7?(o(),t("li",M,J)):e.resource.averageScore[2]>=8?(o(),t("li",K,[(o(!0),t(n,null,i(5-e.resource.averageScore[0]-1,c=>(o(),t("span",{key:c+3,class:"material-icons material-icons-sharp fs-8"},"star"))),128))])):B("",!0)]),s("span",Q,"("+u(e.resource.commentSum)+")",1)]))]),s("div",W,[s("div",X,[s("a",{href:e.resource.url,target:"_blank",type:"button",class:"btn btn-tiffany my-2 mx-1"},"開啟資源網站",8,Y),a(r,{class:"btn btn-yellowBrown my-2 mx-1",type:"button",to:`/resource/${e.resource.id}`},{default:d(()=>[v("查看評論")]),_:2},1032,["to"]),s("div",null,[s("a",{role:"button",onClick:c=>g.removeResourceItem(e.id),class:"btn my-2 mx-1 text-yellowBrown"},ee,8,Z)])])])]))),128))])])])])],64)}const ce=x(w,[["render",se]]);export{ce as default};
