import{h as d,i as o,_ as m,o as s,c as t,t as l,D as h,b as c,F as n,C as i}from"./index-e844e030.js";const{VITE_API_PATH:u}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR",MODE:"production",DEV:!1,PROD:!0},T=d("resources",{state:()=>({resourcesData:[],commentsData:[],resourcesObj:{},isloading:!0}),getters:{},actions:{getResources(){o.get(`${u}/resources`).then(e=>{this.resourcesData=e.data}).catch(e=>{console.log(e)})},getComments(){o.get(`${u}/comments`).then(e=>{this.commentsData=e.data}).catch(e=>{console.log(e)})},getAverageScore(){this.commentsData.forEach(e=>{this.resourcesObj[e.resourceId]===void 0?(this.resourcesObj[e.resourceId]={commentSum:1,scoreSum:e.score,averageScore:e.score},o.patch(`${u}/resources/${e.resourceId}`,{averageScore:e.score,commentSum:1}).then(()=>{})):(this.resourcesObj[e.resourceId].commentSum+=1,this.resourcesObj[e.resourceId].scoreSum+=e.score,this.resourcesObj[e.resourceId].averageScore=(this.resourcesObj[e.resourceId].scoreSum/this.resourcesObj[e.resourceId].commentSum).toFixed(1),o.patch(`${u}/resources/${e.resourceId}`,{averageScore:this.resourcesObj[e.resourceId].averageScore,commentSum:this.resourcesObj[e.resourceId].commentSum}).then(()=>{}))})}}}),S={props:{commentSum:{type:Number,required:!0},averageScore:{type:Number,required:!0}}},_={class:"d-flex justify-content-between align-items-center"},g={key:0},f=c("span",{class:"fs-8 text-gray"},"尚無評價",-1),v=[f],I={key:1,class:"d-flex align-items-center flex-wrap"},y={key:0,class:"fs-7 fw-bold text-secondary me-1"},A={key:0},b={key:1},j={class:"d-flex lh-1 text-secondary"},k={key:0},p={key:1},x=c("span",{class:"material-icons material-icons-sharp fs-8"},"star_half",-1),O={key:2},D=c("span",{class:"material-icons material-icons-sharp fs-8"},"star",-1),N={class:"fs-8 text-gray"};function E(e,P,r,V,B,C){return s(),t("div",_,[r.commentSum===0||r.commentSum===void 0?(s(),t("div",g,v)):(s(),t("div",I,[r.averageScore!==void 0&&r.commentSum!==0?(s(),t("span",y,[isNaN(parseInt(r.averageScore.toString().charAt(2)))?(s(),t("span",A,l(r.averageScore)+".0",1)):(s(),t("span",b,l(r.averageScore),1))])):h("",!0),c("ul",j,[c("li",null,[(s(!0),t(n,null,i(parseInt(r.averageScore.toString().charAt(0)),a=>(s(),t("span",{key:a+1,class:"material-icons material-icons-sharp fs-8"},"star"))),128))]),parseInt(r.averageScore.toString().charAt(2))<=2||isNaN(parseInt(r.averageScore.toString().charAt(2)))||typeof parseInt(r.averageScore.toString().charAt(2))>"u"?(s(),t("li",k,[(s(!0),t(n,null,i(5-parseInt(r.averageScore.toString().charAt(0)),a=>(s(),t("span",{key:a,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(r.averageScore.toString().charAt(2))>=3&&parseInt(r.averageScore.toString().charAt(2))<=7?(s(),t("li",p,[x,(s(!0),t(n,null,i(5-parseInt(r.averageScore.toString().charAt(0))-1,a=>(s(),t("span",{key:a,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(r.averageScore.toString().charAt(2))>=8?(s(),t("li",O,[D,(s(!0),t(n,null,i(5-parseInt(r.averageScore.toString().charAt(0))-1,a=>(s(),t("span",{key:a,class:"material-icons material-icons-sharp fs-8"},"star_half"))),128))])):h("",!0)]),c("span",N," ( "+l(r.commentSum)+" )",1)]))])}const w=m(S,[["render",E]]);export{w as S,T as r};
