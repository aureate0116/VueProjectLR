import{L as N}from"./LoadingComponent-2182a776.js";import{_ as j,o as t,c as s,t as l,S as p,r as b,d as k,w as A,F as d,b as e,D as _,C as h,g,e as T,I as U,O}from"./index-e844e030.js";const V={props:{timespan:{type:Number,required:!0}},data(){return{timeSpanStr:""}},methods:{TimeStamp(n){var i=new Date(n*1e3),x=i.getFullYear(),y=i.getMonth()+1,a=i.getDate(),m=i.getHours(),v=i.getMinutes(),R=Date.parse(new Date),r=0,u;r=R/1e3-n,r<=60?u="剛剛":60<r&&r<=60*60?u=Math.ceil(r/60)+"分鐘前":60*60<r&&r<=60*60*24?u=Math.ceil(r/(60*60))+"小時前":60*60*24<r&&r<=60*60*24*30?u=Math.ceil(r/(60*60*24))+"天前":60*60*24*30<r&&r<=60*60*24*30*12?u=Math.ceil(r/(60*60*24*30))+"個月前":u=x+"年"+y+"月"+a+"日 "+m+":"+v,this.timeSpanStr=u}},mounted(){this.TimeStamp(this.timespan)}};function z(n,i,x,y,a,m){return t(),s("div",null,l(a.timeSpanStr),1)}const M=j(V,[["render",z]]),L="/VueProjectLR/assets/icon_image-e8d535a3.png",{VITE_API_PATH:f}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR",MODE:"production",DEV:!1,PROD:!0},F={data(){return{isLoading:!0,resourcesData:[],relatedResData:[],theResourceId:this.$route.params.resourceId,theResourceData:{},theResCommentsData:[],theUserBookmarksData:[],isBookmark:!1,bookmarkItem:{},userId:localStorage.getItem("userId"),accessToken:localStorage.getItem("accessToken"),isLogin:!1,userInfo:null,commentRating:0,commentContent:"",resourceScoreObj:{}}},components:{LoadingComponent:N,TimeStamp:M},computed:{},watch:{resourcesData(){console.log("theResourceData",this.theResourceData),console.log("theResCommentsData",this.theResCommentsData),console.log("relatedResData",this.relatedResData),this.theResourceData==null||this.theResCommentsData==null||this.relatedResData&&this.relatedResData.length<0?this.isLoading=!0:this.isLoading=!1}},methods:{getResources(){this.$http.get(`${f}/resources`).then(n=>{this.resourcesData=n.data,this.getRelatedResData()}).catch(()=>{})},getTheResourceData(){this.$http.get(`${f}/resources?id=${this.theResourceId}&&_expand=user`).then(n=>{this.theResourceData=n.data[0],this.getResCommentsData()}).catch(()=>{})},getResCommentsData(){this.$http.get(`${f}/comments?_expand=resouceId&&resourceId=${this.theResourceId}&&_expand=user`).then(n=>{this.theResCommentsData=n.data}).catch(()=>{})},closeCollapse(){const n=document.querySelector(".offenseItem.show");n&&n.classList.remove("show")},getUserData(){this.$http.get(`${f}/users?id=${this.userId}`,{Authorization:`Bearer ${this.accessToken}`}).then(n=>{this.userInfo=n.data[0]}).catch(()=>{})},rate(n){this.commentRating=n},checkLoginComment(){this.isLogin==!1&&p.fire({text:"請先登入",icon:"info",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6"})},sendComment(){this.commentRating==0&&p.fire({text:"請給予評分",icon:"info",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6",showConfirmButton:!0}),this.commentContent==""&&p.fire({text:"請填寫評價內容",icon:"info",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6",showConfirmButton:!0}),this.commentContent.length>=20&&this.commentRating!==0&&this.$http.post(`${f}/comments/`,{resourceId:this.theResourceId,userId:this.userId,commentTime:(Date.now()/1e3).toFixed(0),score:this.commentRating,content:this.commentContent,likeNum:0,dislikeNum:0},{Authorization:`Bearer ${this.accessToken}`}).then(()=>{this.$http.patch(`${f}/resources/${this.theResourceId}`,{averageScore:((parseFloat(this.theResourceData.averageScore)*this.theResourceData.commentSum+this.commentRating)/(this.theResourceData.commentSum+1)).toFixed(1),commentSum:this.theResourceData.commentSum+1}).then(n=>{this.getResCommentsData(),this.getTheResourceData(),console.log(n.data),window.location.reload()}).catch(n=>{console.log(n)})}).catch(n=>{console.log(n)})},getRelatedResData(){this.relatedResData=this.resourcesData.filter(n=>n.topics===this.theResourceData.topics).sort(()=>.5-Math.random()).slice(0,5)},getUserBookmarks(){this.$http.get(`${f}/bookmarks?_expand=resource&&userId=${this.userId}`).then(n=>{this.theUserBookmarksData=n.data,this.bookmarkItem=this.theUserBookmarksData.find(i=>i.resourceId==this.theResourceId),console.log("theUserBookmarksData",this.theUserBookmarksData),console.log("this.isBookmark ",this.bookmarkItem)}).catch(n=>{console.log(n)})},clickBookmark(n){this.isLogin==!1?p.fire({text:"請先登入",icon:"info",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6"}):this.bookmarkItem==null?(console.log("this.isBookmark",this.isBookmark),this.$http.post(`${f}/bookmarks?userId=${this.userId}`,{resourceId:n,userId:this.userId,isFixedTop:!1},{Authorization:`Bearer ${this.accessToken}`}).then(i=>{console.log(i.data),p.fire({title:"已成功收藏",icon:"success",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6"}),this.getUserBookmarks()}).catch(i=>{console.log(i.data)})):(p.fire({title:"您確定要取消收藏嗎?",icon:"warning",iconColor:"#F8B436",showCancelButton:!0,confirmButtonColor:"#4AA9B6",cancelButtonColor:"#F8B436",confirmButtonText:"是",cancelButtonText:"否"}).then(i=>{i.isConfirmed&&typeof Storage<"u"&&this.$http.delete(`${f}/bookmarks/${this.bookmarkItem.id}`,{Authorization:`Bearer ${this.accessToken}`}).then(()=>{p.fire({title:"已取消收藏",icon:"success",iconColor:"#4AA9B6",confirmButtonColor:"#4AA9B6"}),this.getUserBookmarks()}).catch(()=>{}),this.getUserBookmarks()}).catch(()=>{}),console.log("this.isBookmark",this.isBookmark),console.log("itemId",n))}},created(){this.getResources(),this.getUserData(),this.getTheResourceData(),this.getUserBookmarks(),this.userId&&(this.isLogin=!0)},mounted(){typeof parseInt(this.resourceId)!="number"&&this.$router.push("/"),this.getResCommentsData(),this.theResourceData===void 0||this.theResCommentsData===void 0||this.relatedResData&&this.relatedResData.length<0?this.isLoading=!0:this.isLoading=!1}},P=e("div",{class:"container-fluid py-5 p-lg-5 py-md-8 bg-darkTiffany d-none d-md-block"},[e("div",{class:"bannerBlock container p-0 p-lg-8 py-md-5"})],-1),E={class:"resourceContent container d-md-flex flex-md-row flex-column-reverse mb-7"},H={class:"leftRelated"},q={class:"imageNBrief rounded-3 border p-3 bg-white"},J=["src","alt"],Y={class:"mt-md-4 text-dark"},G={class:"mt-7 d-none d-md-block py-6"},K={key:0,class:"fs-6 relatedTitle"},Q={class:"relatedResource"},W={class:"fs-7 mb-0"},X={class:"d-flex flex-wrap justify-content-start align-items-center"},Z={key:0},$=e("span",{class:"fs-8 text-gray"},"尚無評價",-1),ee=[$],te={key:1,class:"d-flex align-items-center"},se={key:0,class:"fs-7 fw-bold text-secondary"},oe={key:0},ae={key:1},ne={class:"d-flex mx-1 lh-1 text-secondary"},ie={key:0},le={key:1},re=e("span",{class:"material-icons material-icons-sharp fs-8"},"star_half",-1),ce={key:2},de=e("span",{class:"material-icons material-icons-sharp fs-8"},"star",-1),me={class:"fs-8 text-secondary"},he={class:"rightInfo"},ue={class:"d-flex align-items-center flex-md-row flex-column"},fe={class:"titleBox"},pe={class:"fs-5 fw-bold mt-md-0 mt-3"},_e={class:"d-flex flex-row align-items-center text-secondary"},ge={key:0,class:"fs-7 fw-bold text-secondary"},be={key:0},ke={key:1},xe={key:1},ye={key:0,class:"d-flex"},ve={class:"d-flex align-items-center lh-1 me-lg-2"},Re={key:0},De={key:1},Se=e("span",{class:"material-icons material-icons-sharp fs-8"},"star_half",-1),Ie={key:2},Ce=e("span",{class:"material-icons material-icons-sharp fs-8"},"star",-1),we={class:"fs-8 text-secondary"},Be={key:1},Ae=e("span",{class:"fs-8 text-gray"},"尚無評論",-1),Te=[Ae],Le={class:"classify fs-8"},je={class:"d-flex"},Ne={key:0},Ue={key:1},Oe={class:"btnBox d-flex flex-column justify-content-center"},Ve={class:"btnResLink"},ze=["href"],Me={class:"d-flex justify-content-center flex-row flex-md-column flex-lg-row align-items-center"},Fe={key:0,class:"d-flex me-2"},Pe=e("span",{class:"material-icons"},"bookmark_border",-1),Ee=e("span",null,"收藏",-1),He=[Pe,Ee],qe={key:1,class:"d-flex me-2"},Je=e("span",{class:"material-icons text-secondary"},"bookmark",-1),Ye=e("span",{class:"text-secondary"},"收藏",-1),Ge=[Je,Ye],Ke=e("a",{href:"#",role:"button",class:"d-flex align-items-center me-2"},[e("span",{class:"material-icons material-icons-outlined"},"feedback"),e("span",null,"回報")],-1),Qe={class:"resourceComment"},We={class:"loginComment"},Xe={key:0,class:"commentContent collapse border border-2 rounded-3 p-lg-4 my-2 p-2",id:"collapseComment"},Ze={class:"d-flex p-3 align-items-center justify-content-between"},$e={class:"userInfo card-title fs-7 d-flex align-items-center"},et={class:"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center"},tt={class:"mb-0 mx-2 text-start"},st=e("br",null,null,-1),ot={class:"fs-9 text-gray"},at={class:"commentStar card-text d-flex align-items-center lh-1"},nt=["onClick"],it={href:"#",role:"button"},lt={key:0,class:"material-icons material-icons-sharp"},rt={key:1,class:"material-icons material-icons-sharp"},ct={class:"d-flex flex-column"},dt={class:"form-floating"},mt={key:0,class:"message commentTextarea text-danger fs-8"},ht={key:1,class:"message commentTextarea text-danger fs-8"},ut=e("label",{for:"commentTextarea"},"Comments",-1),ft={key:0,class:"row mt-5"},pt=e("div",{class:"col-10"},null,-1),_t=e("div",{class:"col input-group w-35 text-end mb-3"},[e("select",{class:"form-select form-select-sm",id:"commentSort"},[e("option",{value:"new"},"最新"),e("option",{value:"heightRate",selected:""},"評價最高"),e("option",{value:"heightRate",selected:""},"評價最低")])],-1),gt=[pt,_t],bt={key:1,class:"row mt-5"},kt=e("div",{class:"col text-center text-gray"},"目前尚未有任何評論",-1),xt=[kt],yt={class:"row commentList"},vt={class:"card card-body",style:{"z-index":"10"}},Rt={class:"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between"},Dt={class:"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between"},St={class:"userImg d-inline-block bg-primary px-2 py-2 rounded-circle fw-bold fs-7 lh-1 text-white text-center"},It={class:"mb-0 mx-2 text-start"},Ct=e("br",null,null,-1),wt={class:"fs-9 text-gray"},Bt={class:"d-flex flex-lg-column justify-content-between"},At={class:"card-text d-flex align-items-center lh-1"},Tt=e("span",{class:"text-primary material-icons material-icons-sharp"},"star",-1),Lt=[Tt],jt=e("span",{class:"text-primary material-icons material-icons-sharp"},"star_outline",-1),Nt=[jt],Ut={class:"mb-0 text-end"},Ot={class:"d-flex flex-column"},Vt={class:"form-floating my-3"},zt={class:"d-flex justify-content-between fs-8"},Mt={class:"d-flex align-items-center"},Ft=e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_up_alt")],-1),Pt={class:"mx-2"},Et=e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_down_alt")],-1),Ht={class:"mx-2"},qt={class:"position-relatvie"},Jt=["href"],Yt=e("span",{class:"material-icons-outlined"},"report",-1),Gt=e("span",null,"檢舉",-1),Kt=[Yt,Gt],Qt=["id"],Wt=e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem1"}),e("label",{class:"form-check-label",for:"offenseItem1"}," 偏離主題 ")],-1),Xt=e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem2"}),e("label",{class:"form-check-label",for:"offenseItem2"}," 垃圾內容及廣告宣傳 ")],-1),Zt=e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem3"}),e("label",{class:"form-check-label",for:"offenseItem3"}," 騷擾內容及不雅用語 ")],-1),$t=e("button",{class:"btn btn-primary btn-sm text-white",type:"submit"}," 送出 ",-1),es=[Wt,Xt,Zt,$t],ts=e("div",null,[e("div",{class:"modal fade",id:"moreComment","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-scrollable"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"staticBackdropLabel"}," 3.2顆星 35個評價 "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",{class:"modal-body"},[e("div",{class:"col mb-3"},[e("div",{class:"card card-body",style:{"z-index":"10"}},[e("div",{class:"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between"},[e("h3",{class:"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between"},[e("img",{class:"rounded-circle",src:L,alt:""}),e("p",{class:"mb-0 mx-2 text-start"},[g(" Jenny"),e("br"),e("span",{class:"fs-9 text-gray"},"5 年前端工程師")])]),e("div",{class:"d-flex flex-lg-column justify-content-between"},[e("ul",{class:"card-text d-flex align-items-center lh-1"},[e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])])]),e("p",{class:"mb-0 text-end"},[e("span",{class:"fs-9 text-gray"},"6 個月前")])])]),e("div",{class:"d-flex flex-column"},[e("div",{class:"form-floating my-3"},[e("p",null," 留言內容顯示在這裡留言內容顯示在這裡留言內容顯示在這裡留言內容顯示在這裡 ")])]),e("div",{class:"d-flex justify-content-between fs-8"},[e("div",{class:"d-flex align-items-center"},[e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_up_alt")]),e("span",{class:"mx-2"},"35"),e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_down_alt")]),e("span",{class:"mx-2"},"3")]),e("div",{class:"position-relatvie"},[e("a",{class:"d-flex align-items-center","data-bs-toggle":"collapse",href:"#commentOffense3",role:"button","aria-expanded":"false","aria-controls":"commentOffense"},[e("span",{class:"material-icons-outlined"},"report"),e("span",null,"檢舉")]),e("div",{class:"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0",id:"commentOffense3",style:{"z-index":"0"}},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem1"}),e("label",{class:"form-check-label",for:"offenseItem1"}," 偏離主題 ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem2"}),e("label",{class:"form-check-label",for:"offenseItem2"}," 垃圾內容及廣告宣傳 ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem3"}),e("label",{class:"form-check-label",for:"offenseItem3"}," 騷擾內容及不雅用語 ")]),e("button",{class:"btn btn-primary btn-sm text-white",type:"submit"}," 送出 ")])])])])]),e("div",{class:"col mb-3"},[e("div",{class:"card card-body",style:{"z-index":"10"}},[e("div",{class:"d-flex p-lg-3 align-items-lg-center flex-column flex-lg-row justify-content-between"},[e("h3",{class:"card-title fs-7 d-flex align-items-center justify-content-lg-start justify-content-between"},[e("img",{class:"rounded-circle",src:L,alt:""}),e("p",{class:"mb-0 mx-2 text-start"},[g(" Jenny"),e("br"),e("span",{class:"fs-9 text-gray"},"5 年前端工程師")])]),e("div",{class:"d-flex flex-lg-column justify-content-between"},[e("ul",{class:"card-text d-flex align-items-center lh-1"},[e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])]),e("li",null,[e("a",{href:"#",role:"button"},[e("span",{class:"material-icons material-icons-sharp"},"star_outline")])])]),e("p",{class:"mb-0 text-end"},[e("span",{class:"fs-9 text-gray"},"6 個月前")])])]),e("div",{class:"d-flex flex-column"},[e("div",{class:"form-floating my-3"},[e("p",null," 留言內容顯示在這裡留言內容顯示在這裡留言內容顯示在這裡留言內容顯示在這裡 ")])]),e("div",{class:"d-flex justify-content-between fs-8"},[e("div",{class:"d-flex align-items-center"},[e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_up_alt")]),e("span",{class:"mx-2"},"35"),e("a",{href:"#"},[e("span",{class:"material-icons-outlined fs-6"},"thumb_down_alt")]),e("span",{class:"mx-2"},"3")]),e("div",{class:"position-relatvie"},[e("a",{class:"d-flex align-items-center","data-bs-toggle":"collapse",href:"#commentOffense3",role:"button","aria-expanded":"false","aria-controls":"commentOffense"},[e("span",{class:"material-icons-outlined"},"report"),e("span",null,"檢舉")]),e("div",{class:"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0",id:"commentOffense3",style:{"z-index":"0"}},[e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem1"}),e("label",{class:"form-check-label",for:"offenseItem1"}," 偏離主題 ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem2"}),e("label",{class:"form-check-label",for:"offenseItem2"}," 垃圾內容及廣告宣傳 ")]),e("div",{class:"form-check"},[e("input",{class:"form-check-input",type:"radio",name:"offenseItem",id:"offenseItem3"}),e("label",{class:"form-check-label",for:"offenseItem3"}," 騷擾內容及不雅用語 ")]),e("button",{class:"btn btn-primary btn-sm text-white",type:"submit"}," 送出 ")])])])])])])])])])],-1);function ss(n,i,x,y,a,m){const v=b("loading-component"),R=b("router-link"),r=b("time-stamp"),u=b("router-view");return t(),s(d,null,[k(v,{"is-loading":a.isLoading},null,8,["is-loading"]),k(u,{onClick:m.closeCollapse},{default:A(()=>{var D,S,I,C,w,B;return[P,e("div",E,[e("div",H,[e("div",q,[e("img",{class:"d-md-block",src:`/VueProjectLR/images/resources_cover/${a.theResourceData.imgUrl}`,alt:a.theResourceData.title},null,8,J),e("div",Y,l(a.theResourceData.intro),1)]),e("div",G,[a.relatedResData.length!=0?(t(),s("h3",K," 相關資源 ")):_("",!0),e("div",Q,[(t(!0),s(d,null,h(a.relatedResData,o=>(t(),s("div",{class:"my-4",key:o.id},[e("div",null,[e("h4",W,[k(R,{to:`/resource/${o.id}`},{default:A(()=>[g(l(o.title),1)]),_:2},1032,["to"])]),e("div",X,[o.commentSum===0||o.commentSum===void 0?(t(),s("div",Z,ee)):(t(),s("div",te,[o.averageScore!==void 0&&o.commentSum!==0?(t(),s("span",se,[isNaN(parseInt(o.averageScore.toString().charAt(2)))?(t(),s("span",oe,l(o.averageScore)+".0",1)):(t(),s("span",ae,l(o.averageScore),1))])):_("",!0),e("ul",ne,[e("li",null,[(t(!0),s(d,null,h(parseInt(o.averageScore.toString().charAt(0)),c=>(t(),s("span",{key:c+1,class:"material-icons material-icons-sharp fs-8"},"star"))),128))]),parseInt(o.averageScore.toString().charAt(2))<=2||isNaN(parseInt(o.averageScore.toString().charAt(2)))||typeof parseInt(o.averageScore.toString().charAt(2))>"u"?(t(),s("li",ie,[(t(!0),s(d,null,h(5-parseInt(o.averageScore.toString().charAt(0)),c=>(t(),s("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(o.averageScore.toString().charAt(2))>=3&&parseInt(o.averageScore.toString().charAt(2))<=7?(t(),s("li",le,[re,(t(!0),s(d,null,h(5-parseInt(o.averageScore.toString().charAt(0))-1,c=>(t(),s("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(o.averageScore.toString().charAt(2))>=8?(t(),s("li",ce,[de,(t(!0),s(d,null,h(5-parseInt(o.averageScore.toString().charAt(0))-1,c=>(t(),s("span",{key:c,class:"material-icons material-icons-sharp fs-8"},"star_half"))),128))])):_("",!0)]),e("span",me,"("+l(o.commentSum)+")",1)]))])])]))),128))])])]),e("div",he,[e("div",ue,[e("div",fe,[e("h2",pe,l(a.theResourceData.title),1),e("div",_e,[a.theResourceData.averageScore!==void 0&&a.theResourceData.commentSum!==0?(t(),s("span",ge,[isNaN(parseInt(a.theResourceData.averageScore.toString().charAt(2)))?(t(),s("span",be,l(a.theResourceData.averageScore)+".0",1)):(t(),s("span",ke,l(a.theResourceData.averageScore),1))])):_("",!0),a.theResourceData.averageScore!==void 0?(t(),s("div",xe,[a.theResourceData.commentSum!==0?(t(),s("div",ye,[e("ul",ve,[e("li",null,[(t(!0),s(d,null,h(parseInt(a.theResourceData.averageScore.toString().charAt(0)),o=>(t(),s("span",{key:o+1,class:"material-icons material-icons-sharp fs-8"},"star"))),128))]),parseInt(a.theResourceData.averageScore.toString().charAt(2))<=2||isNaN(parseInt(a.theResourceData.averageScore.toString().charAt(2)))||typeof parseInt(a.theResourceData.averageScore.toString().charAt(2))>"u"?(t(),s("li",Re,[(t(!0),s(d,null,h(5-parseInt(a.theResourceData.averageScore.toString().charAt(0)),o=>(t(),s("span",{key:o,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(a.theResourceData.averageScore.toString().charAt(2))>=3&&parseInt(a.theResourceData.averageScore.toString().charAt(2))<=7?(t(),s("li",De,[Se,(t(!0),s(d,null,h(5-parseInt(a.theResourceData.averageScore.toString().charAt(0))-1,o=>(t(),s("span",{key:o,class:"material-icons material-icons-sharp fs-8"},"star_outline"))),128))])):parseInt(a.theResourceData.averageScore.toString().charAt(2))>=8?(t(),s("li",Ie,[Ce,(t(!0),s(d,null,h(5-parseInt(a.theResourceData.averageScore.toString().charAt(0))-1,o=>(t(),s("span",{key:o,class:"material-icons material-icons-sharp fs-8"},"star_half"))),128))])):_("",!0)]),e("span",we,"("+l(a.theResourceData.commentSum)+")",1)])):(t(),s("div",Be,Te))])):_("",!0)]),e("div",Le,[e("ul",je,[e("li",null,l(a.theResourceData.topics)+" /",1),e("li",null,l(a.theResourceData.type)+" /",1),e("li",null,l(a.theResourceData.level)+" /",1),e("li",null,l(a.theResourceData.price),1)]),e("ul",null,[e("li",null,[(t(!0),s(d,null,h(a.theResourceData.lang,o=>(t(),s("span",{key:a.theResourceData.id+o},l(o),1))),128))]),e("li",null,[g(" 建立者 : "),((D=a.theResourceData.user)==null?void 0:D.role)==="admin"?(t(),s("span",Ne,"Admin")):(t(),s("span",Ue,l((S=a.theResourceData.user)==null?void 0:S.firstName)+" "+l((I=a.theResourceData.user)==null?void 0:I.lastName),1))])])])]),e("div",Oe,[e("div",Ve,[e("a",{href:a.theResourceData.url,type:"button",class:"w-100 btn btn-sm btn-secondary my-2 text-white px-lg-4 py-2 fs-6"}," 前往資源網站 ",8,ze)]),e("div",Me,[e("a",{role:"button",class:"btnBookmark d-flex align-items-center me-2",onClick:i[0]||(i[0]=T(o=>m.clickBookmark(a.theResourceData.id),["prevent"]))},[a.bookmarkItem==null?(t(),s("span",Fe,He)):(t(),s("span",qe,Ge))]),Ke])])]),e("div",Qe,[e("div",We,[e("button",{class:"btnComment btn btn-outline-primary w-100","data-bs-toggle":"collapse",href:"#collapseComment",role:"button","aria-expanded":"false","aria-controls":"collapseComment",onClick:i[1]||(i[1]=(...o)=>m.checkLoginComment&&m.checkLoginComment(...o))}," 立即評論 "),a.isLogin?(t(),s("div",Xe,[e("div",Ze,[e("h3",$e,[e("span",et,l((C=a.userInfo)==null?void 0:C.firstName[0].toUpperCase()),1),e("p",tt,[g(l((w=a.userInfo)==null?void 0:w.firstName),1),st,e("span",ot,l((B=a.userInfo)==null?void 0:B.title),1)])]),e("ul",at,[(t(),s(d,null,h(5,o=>e("li",{key:o,onClick:T(c=>m.rate(o),["prevent"])},[e("a",it,[o<=a.commentRating?(t(),s("span",lt,"star")):(t(),s("span",rt,"star_outline"))])],8,nt)),64))])]),e("div",ct,[e("div",dt,[U(e("textarea",{class:"form-control",placeholder:"",id:"commentTextarea",style:{height:"100px"},"onUpdate:modelValue":i[2]||(i[2]=o=>a.commentContent=o)},null,512),[[O,a.commentContent]]),a.commentContent.length<20?(t(),s("span",mt,"字數須超過20字")):(t(),s("span",ht)),ut]),e("button",{role:"button",class:"btnCommentSubmit btn btn-primary text-white mt-4",onClick:i[3]||(i[3]=(...o)=>m.sendComment&&m.sendComment(...o))}," 送出評論 ")])])):_("",!0)]),a.theResCommentsData.length>0?(t(),s("div",ft,gt)):(t(),s("div",bt,xt)),e("div",yt,[(t(!0),s(d,null,h(a.theResCommentsData,o=>(t(),s("div",{key:o.id,class:"col mb-3",style:{"z-index":"10"}},[e("div",vt,[e("div",Rt,[e("h3",Dt,[e("span",St,l(o.user.firstName[0].toUpperCase()),1),e("p",It,[g(l(o.user.firstName),1),Ct,e("span",wt,l(o.user.title),1)])]),e("div",Bt,[e("ul",At,[(t(!0),s(d,null,h(parseInt(o.score),c=>(t(),s("li",{key:c},Lt))),128)),(t(!0),s(d,null,h(5-parseInt(o.score),c=>(t(),s("li",{key:c},Nt))),128))]),e("p",Ut,[k(r,{class:"fs-9 text-gray",timespan:o.commentTime},null,8,["timespan"])])])]),e("div",Ot,[e("div",Vt,[e("p",null,l(o.content),1)])]),e("div",zt,[e("div",Mt,[Ft,e("span",Pt,l(o.likeNum),1),Et,e("span",Ht,l(o.dislikeNum),1)]),e("div",qt,[e("a",{class:"d-flex align-items-center","data-bs-toggle":"collapse",href:`#commentOffense${o.id}`,role:"button","aria-expanded":"false","aria-controls":"commentOffense",onClick:i[4]||(i[4]=(...c)=>m.closeCollapse&&m.closeCollapse(...c))},Kt,8,Jt),e("div",{class:"offenseItem border bg-light rounded-3 p-3 collapse position-absolute end-0",id:`commentOffense${o.id}`,style:{"z-index":"0"},onShown:i[5]||(i[5]=(...c)=>m.closeCollapse&&m.closeCollapse(...c))},es,40,Qt)])])])]))),128))]),ts])])])]}),_:1},8,["onClick"])],64)}const ns=j(F,[["render",ss]]);export{ns as default};
