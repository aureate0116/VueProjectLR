import{L as p}from"./LoadingComponent-d4cd4a50.js";import{S as f}from"./StarComponent-a16b12f0.js";import{_ as b,S as m,r,o as n,c,d as s,e as t,F as u,N as x,O as B,g as l,j as h,t as S}from"./index-4958f9d3.js";const{VITE_API_PATH:i}={VITE_API_PATH:"https://json-server-vueprojectlr.onrender.com",BASE_URL:"/VueProjectLR/",MODE:"production",DEV:!1,PROD:!0},$={data(){return{isLoading:!1,userInfo:null,userId:localStorage.getItem("userId"),accessToken:localStorage.getItem("accessToken"),userBookmarksData:[]}},components:{LoadingComponent:p,StarComponent:f},computed:{},methods:{getUserData(){this.$http.get(`${i}/users/${this.userId}`).then(e=>{this.userInfo=e.data[0],this.isLogin=!0}).catch(e=>{console.log(e)})},getUserBookmarks(){this.$http.get(`${i}/bookmarks?_expand=resource&&userId=${this.userId}`).then(e=>{this.userBookmarksData=e.data}).catch(()=>{})},removeResourceItem(e){m.fire({title:"您確定要取消收藏嗎?",icon:"warning",iconColor:"#F8B436",showCancelButton:!0,confirmButtonColor:"#4AA9B6",cancelButtonColor:"#F8B436",confirmButtonText:"是",cancelButtonText:"否"}).then(d=>{d.isConfirmed&&typeof Storage<"u"&&this.$http.delete(`${i}/bookmarks/${e}`,{Authorization:`Bearer ${this.accessToken}`}).then(()=>{m.fire({title:"已成功取消收藏",confirmButtonColor:"#4AA9B6"}),this.getUserBookmarks()}).catch(()=>{})}).catch(()=>{})}},created(){this.getUserData(),this.getUserBookmarks()},mounted(){}},y={class:"container my-8 pb-5"},C={class:"mt-4"},w=B('<div class="row border-bottom pb-2"><div class="col-2 d-none d-xl-block"></div><div class="col-1 d-none d-md-block"></div><div class="col-6 col-xl-4 col-md-5 text-center">資源項目</div><div class="col-6 col-xl-4 col-md-5 text-center">操作</div><div class="col-1 d-none d-xl-block"></div></div>',1),A={class:"row"},T={class:"col userResourcesList"},D=t("div",{class:"col-2 d-none d-xl-block"},null,-1),L={key:0,class:"col-1 d-none d-md-block"},R=["src","alt"],U={key:1,class:"col-1 d-none d-md-block"},V=["src","alt"],j={class:"col-xl-4 col-5 col-md-5"},E={class:"fs-7 ellipsis"},P={class:"col-xl-4 col-6 col-md-5"},N={class:"d-flex align-items-center justify-content-center flex-md-row"},F=["href"],H=["onClick"],O=t("span",{class:"fs-6 material-icons btnRemove"},"bookmark_remove",-1),z=[O],M=t("div",{class:"col-1 d-none d-xl-block"},null,-1);function q(e,d,G,J,_,g){const k=r("loading-component"),a=r("router-link"),v=r("star-component");return n(),c(u,null,[s(k,{"is-loading":_.isLoading},null,8,["is-loading"]),t("div",y,[t("div",C,[w,t("div",A,[t("div",T,[(n(!0),c(u,null,x(_.userBookmarksData,o=>(n(),c("div",{key:o.resourceId,class:"row py-1 my-3 d-flex align-items-center itemRow"},[D,o.resource.imgUrl!=""?(n(),c("div",L,[s(a,{to:`/resource/${o.resource.id}`,target:"_blank"},{default:l(()=>[t("img",{src:`./images/resources_cover/${o.resource.imgUrl}`,alt:o.resource.title},null,8,R)]),_:2},1032,["to"])])):(n(),c("div",U,[s(a,{to:`/resource/${o.resource.id}`,target:"_blank"},{default:l(()=>[t("img",{src:"./images/resources_cover/noimgCover.jpg",alt:o.resource.title},null,8,V)]),_:2},1032,["to"])])),t("div",j,[t("h4",E,[s(a,{class:"text-dark",to:`/resource/${o.resource.id}`,target:"_blank"},{default:l(()=>[h(S(o.resource.title),1)]),_:2},1032,["to"])]),s(v,{commentSum:o==null?void 0:o.resource.commentSum,averageScore:o==null?void 0:o.resource.averageScore.toString()},null,8,["commentSum","averageScore"])]),t("div",P,[t("div",N,[s(a,{class:"btn btnHover btn-outline-primary my-lg-2 mx-lg-1",role:"button",to:`/resource/${o.resource.id}`},{default:l(()=>[h("查看評論")]),_:2},1032,["to"]),t("a",{href:o.resource.url,target:"_blank",type:"button",class:"btn btnHover btn-outline-secondary my-2 mx-2"},"資源網站",8,F),t("a",{role:"button",onClick:K=>g.removeResourceItem(o.id),class:"btn my-2 mx-1 text-secondary d-none d-md-block"},z,8,H)])]),M]))),128))])])])])],64)}const Y=b($,[["render",q]]);export{Y as default};
